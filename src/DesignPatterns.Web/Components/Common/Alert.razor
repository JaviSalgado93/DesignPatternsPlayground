<div class="@GetAlertClasses() rounded-xl p-4 mb-4 shadow-md border @GetBorderClass()" role="alert">
    <div class="flex items-start gap-4">
        <!-- Icon -->
        <div class="flex-shrink-0">
            <HeroIcon IconName="@GetIconName()" AdditionalClass="w-6 h-6" />
        </div>

        <!-- Content -->
        <div class="flex-1">
            @if (!string.IsNullOrEmpty(Title))
            {
                <h4 class="text-lg font-bold mb-2 @GetTextColor()">@Title</h4>
            }
            <div class="@GetTextColor() leading-relaxed">
                @if (!string.IsNullOrEmpty(Message))
                {
                    <p>@Message</p>
                }
                @ChildContent
            </div>

            @if (!string.IsNullOrEmpty(ActionText))
            {
                <button @onclick="OnActionClick"
                        class="mt-3 font-semibold @GetTextColor() hover:underline">
                    @ActionText →
                </button>
            }
        </div>

        <!-- Close button -->
        @if (Dismissible)
        {
            <button @onclick="OnDismiss"
                    class="flex-shrink-0 @GetTextColor() hover:opacity-70 transition-opacity">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" />
                </svg>
            </button>
        }
    </div>
</div>

@code {
    [Parameter] public string Type { get; set; } = "info"; // info, success, warning, error
    [Parameter] public string Title { get; set; } = "";
    [Parameter] public string Message { get; set; } = "";
    [Parameter] public string ActionText { get; set; } = "";
    [Parameter] public bool Dismissible { get; set; } = false;
    [Parameter] public RenderFragment? ChildContent { get; set; }
    [Parameter] public EventCallback OnActionClick { get; set; }
    [Parameter] public EventCallback OnDismiss { get; set; }

    private string GetAlertClasses()
    {
        return Type switch
        {
            "success" => "bg-green-50",
            "warning" => "bg-yellow-50",
            "error" => "bg-red-50",
            _ => "bg-blue-50"
        };
    }

    private string GetBorderClass()
    {
        return Type switch
        {
            "success" => "border-green-200",
            "warning" => "border-yellow-200",
            "error" => "border-red-200",
            _ => "border-blue-200"
        };
    }

    private string GetTextColor()
    {
        return Type switch
        {
            "success" => "text-green-800",
            "warning" => "text-yellow-800",
            "error" => "text-red-800",
            _ => "text-blue-800"
        };
    }

    private string GetIconName()
    {
        return Type switch
        {
            "success" => "check",
            "warning" => "exclamation-triangle",
            "error" => "x-circle",
            _ => "information-circle"
        };
    }
}