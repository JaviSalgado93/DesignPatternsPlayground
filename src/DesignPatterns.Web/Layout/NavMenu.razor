<div class="bg-secondary-900 text-white h-screen w-64 fixed left-0 top-0 overflow-y-auto shadow-2xl pb-28 transition-transform duration-300 z-50 lg:translate-x-0 @(isSidebarOpen ? "translate-x-0" : "-translate-x-full lg:translate-x-0")" @onclick:stopPropagation="true">
    <!-- Logo/Header -->
    <div class="p-6 border-b border-secondary-800">
        <h1 class="text-2xl font-bold bg-gradient-to-r from-primary-400 to-accent-purple bg-clip-text text-transparent leading-tight">
            Design Patterns
        </h1>
        <p class="text-secondary-400 text-sm mt-1">Playground</p>
    </div>

    <!-- Navigation Links -->
    <nav class="p-4">
        <div class="flex flex-col gap-1">
            <NavLink href="" class="nav-item" Match="NavLinkMatch.All" @onclick="OnMenuItemClick">
                <span class="nav-icon">
                    <HeroIcon IconName="home" AdditionalClass="w-5 h-5" />
                </span>
                <span>Home</span>
            </NavLink>

            <!-- Categorías de Patrones -->
            <div class="mt-6">
                <p class="px-4 text-xs font-semibold text-secondary-400 uppercase tracking-wider mb-2">
                    Categorías
                </p>

                <div class="flex flex-col gap-1">
                    <NavLink href="creational" class="nav-item" @onclick="OnMenuItemClick">
                        <span class="nav-icon">
                            <HeroIcon IconName="building-library" AdditionalClass="w-5 h-5" />
                        </span>
                        <span>Creational</span>
                    </NavLink>

                    <NavLink href="structural" class="nav-item" @onclick="OnMenuItemClick">
                        <span class="nav-icon">
                            <HeroIcon IconName="wrench" AdditionalClass="w-5 h-5" />
                        </span>
                        <span>Structural</span>
                    </NavLink>

                    <NavLink href="behavioral" class="nav-item" @onclick="OnMenuItemClick">
                        <span class="nav-icon">
                            <HeroIcon IconName="bolt" AdditionalClass="w-5 h-5" />
                        </span>
                        <span>Behavioral</span>
                    </NavLink>
                </div>
            </div>

            <!-- Recursos -->
            <div class="mt-6">
                <p class="px-4 text-xs font-semibold text-secondary-400 uppercase tracking-wider mb-2">
                    Recursos
                </p>

                <div class="flex flex-col gap-1">
                    <NavLink href="about" class="nav-item" @onclick="OnMenuItemClick">
                        <span class="nav-icon">
                            <HeroIcon IconName="book-open" AdditionalClass="w-5 h-5" />
                        </span>
                        <span>Acerca de</span>
                    </NavLink>

                    <NavLink href="references" class="nav-item" @onclick="OnMenuItemClick">
                        <span class="nav-icon">
                            <HeroIcon IconName="link" AdditionalClass="w-5 h-5" />
                        </span>
                        <span>Referencias</span>
                    </NavLink>
                </div>
            </div>

            <!-- Desarrollo - Temporal -->
            @* <div class="mt-6">
                <p class="px-4 text-xs font-semibold text-secondary-400 uppercase tracking-wider mb-2">
                    Desarrollo
                </p>

                <div class="flex flex-col gap-1">
                    <NavLink href="test-components" class="nav-item" @onclick="OnMenuItemClick">
                        <span class="nav-icon">
                            <HeroIcon IconName="cube" AdditionalClass="w-5 h-5" />
                        </span>
                        <span>Test Componentes</span>
                    </NavLink>
                </div>
            </div> *@
        </div>
    </nav>

    <!-- Footer del Sidebar -->
    <div class="absolute bottom-0 left-0 right-0 p-4 border-t border-secondary-800 bg-secondary-900">
        <div class="flex items-center space-x-3">
            <div class="w-10 h-10 bg-gradient-to-br from-primary-500 to-accent-purple rounded-full flex items-center justify-center text-white font-bold">
                JP
            </div>
            <div class="flex-1">
                <p class="text-sm font-medium">Javier Salgado</p>
                <p class="text-xs text-secondary-400">Developer</p>
            </div>
        </div>
    </div>
</div>

<style>
    .nav-item {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        padding: 0.75rem 1rem;
        border-radius: 0.5rem;
        color: #a3a3a3;
        margin-bottom: 0.25rem;
        cursor: pointer;
        transition: all 300ms cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
    }

    .nav-item::before {
        content: '';
        position: absolute;
        left: 0;
        top: 0;
        bottom: 0;
        width: 4px;
        background-color: transparent;
        border-radius: 0 4px 4px 0;
        transition: background-color 300ms;
    }

    .nav-item:hover {
        background-color: #1f2937;
        color: white;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.3);
        transform: translateX(4px);
    }

    .nav-item:hover::before {
        background-color: #2563eb;
    }

    .nav-item:hover .nav-icon {
        transform: scale(1.15);
    }

    .nav-item.active {
        background-color: #2563eb;
        color: white;
        box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.3);
    }

    .nav-item.active::before {
        background-color: #1d4ed8;
    }

    .nav-item.active:hover {
        background-color: #1d4ed8;
        transform: translateX(4px);
    }

    .nav-item ::deep a {
        color: inherit;
        text-decoration: none;
        display: flex;
        align-items: center;
        width: 100%;
    }

    .nav-icon {
        font-size: 1.25rem;
        flex-shrink: 0;
        transition: transform 300ms cubic-bezier(0.4, 0, 0.2, 1);
    }
</style>

@code {
    private bool isSidebarOpen = false;

    [Parameter]
    public EventCallback OnMenuItemClicked { get; set; }

    public async Task Toggle()
    {
        isSidebarOpen = !isSidebarOpen;
        await InvokeAsync(StateHasChanged);
    }

    public async Task CloseSidebar()
    {
        isSidebarOpen = false;
        await InvokeAsync(StateHasChanged);
    }

    private async Task OnMenuItemClick()
    {
        await CloseSidebar();
        await OnMenuItemClicked.InvokeAsync();
    }
}