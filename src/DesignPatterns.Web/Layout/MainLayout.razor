@inherits LayoutComponentBase

<!-- Header -->
<Header OnMenuToggleCallback="ToggleSidebar" />

<!-- Mobile Overlay -->
<div class="fixed inset-0 bg-black/50 z-40 lg:hidden transition-opacity duration-300 @(isSidebarOpen ? "opacity-100 pointer-events-auto" : "opacity-0 pointer-events-none")" 
     @onclick="CloseSidebar"></div>

<div class="flex min-h-screen bg-secondary-50 flex-col lg:flex-row">
    <!-- Sidebar -->
    <NavMenu @ref="navMenuRef" OnMenuItemClicked="CloseSidebar" />

    <!-- Main Content -->
    <main class="flex-1 w-full flex flex-col">
        <!-- Page Content -->
        <div class="flex-1 p-4 md:p-8 animate-fade-in">
            @Body
        </div>

        <!-- Footer -->
        <Footer />
    </main>
</div>

@code {
    private NavMenu navMenuRef;
    private bool isSidebarOpen = false;

    private async Task ToggleSidebar()
    {
        await navMenuRef.Toggle();
        isSidebarOpen = !isSidebarOpen;
    }

    private async Task CloseSidebar()
    {
        await navMenuRef.CloseSidebar();
        isSidebarOpen = false;
    }
}